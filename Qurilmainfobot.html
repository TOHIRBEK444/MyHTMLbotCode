<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qurilma Info Bot</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #1a2a3a;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #0d1b26;
            --success: #27ae60;
            --warning: #f39c12;
            --info: #9b59b6;
            --security: #2c3e50;
            --chart1: #3498db;
            --chart2: #2ecc71;
            --chart3: #e74c3c;
            --chart4: #f39c12;
            --transition: all 0.4s cubic-bezier(0.215, 0.61, 0.355, 1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--primary), var(--dark));
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
            transition: var(--transition);
        }
        
        body.light-theme {
            --primary: #f0f2f5;
            --secondary: #1e88e5;
            --accent: #d32f2f;
            --light: #1a2a3a;
            --dark: #e3e8ee;
            --success: #43a047;
            --warning: #ff9800;
            --info: #7b1fa2;
            --security: #455a64;
            background: linear-gradient(135deg, #f5f7fa, #e4e7eb);
        }
        
        body.blue-theme {
            --primary: #0c2461;
            --secondary: #1e90ff;
            --accent: #ff6b6b;
            --light: #dfe6e9;
            --dark: #081b33;
            --success: #00b894;
            --warning: #fdcb6e;
            --info: #6c5ce7;
            --security: #2d3436;
            background: linear-gradient(135deg, #0c2461, #1e3799);
        }
        
        body.green-theme {
            --primary: #1e453e;
            --secondary: #2ecc71;
            --accent: #e74c3c;
            --light: #d5f5e3;
            --dark: #0d2b23;
            --success: #27ae60;
            --warning: #f39c12;
            --info: #8e44ad;
            --security: #2c3e50;
            background: linear-gradient(135deg, #1e453e, #0d2b23);
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            border-bottom: 2px solid rgba(255,255,255,0.1);
            margin-bottom: 40px;
            position: relative;
            animation: fadeInDown 0.8s ease;
        }
        
        body.light-theme header {
            border-bottom: 2px solid rgba(0,0,0,0.1);
        }
        
        header h1 {
            font-size: 3.5rem;
            margin-bottom: 15px;
            background: linear-gradient(to right, var(--secondary), var(--success));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 15px rgba(0,0,0,0.3);
            letter-spacing: 1px;
        }
        
        header p {
            font-size: 1.2rem;
            max-width: 900px;
            margin: 0 auto 20px;
            line-height: 1.7;
            color: #bdc3c7;
        }
        
        body.light-theme header p {
            color: #5a6268;
        }
        
        .security-info {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px 20px;
            border-radius: 10px;
            max-width: 800px;
            margin: 0 auto;
            font-size: 0.95rem;
            border: 1px solid rgba(52, 152, 219, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        body.light-theme .security-info {
            background: rgba(255, 255, 255, 0.7);
            color: #333;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(12px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        body.light-theme .card {
            background: rgba(255, 255, 255, 0.85);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            border: 1px solid rgba(0,0,0,0.05);
            color: #333;
        }
        
        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 35px rgba(0, 0, 0, 0.5);
            border-color: rgba(52, 152, 219, 0.3);
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(52, 152, 219, 0.1) 0%, transparent 70%);
            z-index: -1;
        }
        
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        body.light-theme .card-header {
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }
        
        .card-header i {
            font-size: 2.2rem;
            margin-right: 15px;
            color: var(--secondary);
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(52, 152, 219, 0.15);
            border-radius: 50%;
        }
        
        .card-header h2 {
            font-size: 1.8rem;
            letter-spacing: 0.5px;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
        }
        
        .info-item {
            background: rgba(0, 0, 0, 0.25);
            padding: 18px;
            border-radius: 12px;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.05);
            animation: fadeIn 0.6s ease;
        }
        
        body.light-theme .info-item {
            background: rgba(255, 255, 255, 0.65);
            border: 1px solid rgba(0,0,0,0.05);
        }
        
        .info-item:hover {
            background: rgba(0, 0, 0, 0.35);
            transform: translateY(-5px);
            border-color: rgba(52, 152, 219, 0.2);
        }
        
        body.light-theme .info-item:hover {
            background: rgba(255, 255, 255, 0.85);
        }
        
        .info-item h3 {
            font-size: 1.1rem;
            margin-bottom: 12px;
            color: var(--secondary);
            display: flex;
            align-items: center;
        }
        
        .info-item h3 i {
            margin-right: 10px;
            font-size: 1rem;
            color: #3498db;
        }
        
        .info-item p {
            font-size: 1.15rem;
            word-break: break-word;
            line-height: 1.5;
            min-height: 24px;
        }
        
        body.light-theme .info-item p {
            color: #333;
        }
        
        .info-item .value {
            font-weight: 600;
            color: #fff;
        }
        
        body.light-theme .info-item .value {
            color: #1a2a3a;
        }
        
        .map-container {
            height: 450px;
            background: rgba(0,0,0,0.25);
            border-radius: 15px;
            overflow: hidden;
            margin-top: 25px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        body.light-theme .map-container {
            background: rgba(255, 255, 255, 0.65);
        }
        
        #map {
            height: 100%;
            width: 100%;
            z-index: 10;
        }
        
        .map-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.8);
            padding: 18px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 20;
            backdrop-filter: blur(5px);
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        
        body.light-theme .map-overlay {
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            border-top: 1px solid rgba(0,0,0,0.1);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 40px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 16px 35px;
            font-size: 1.15rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: var(--transition);
            font-weight: 600;
            box-shadow: 0 7px 18px rgba(0,0,0,0.25);
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }
        
        .btn:hover::before {
            transform: translateX(100%);
        }
        
        .btn i {
            margin-right: 12px;
            font-size: 1.2rem;
        }
        
        .btn-primary {
            background: var(--secondary);
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.35);
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background: #219653;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.35);
        }
        
        .btn-danger {
            background: var(--accent);
            color: white;
        }
        
        .btn-danger:hover {
            background: #c0392b;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.35);
        }
        
        .btn-info {
            background: var(--info);
            color: white;
        }
        
        .btn-info:hover {
            background: #8e44ad;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.35);
        }
        
        .notification {
            position: fixed;
            top: 25px;
            right: 25px;
            padding: 20px 25px;
            border-radius: 12px;
            background: var(--success);
            color: white;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
            transform: translateX(150%);
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 1000;
            display: flex;
            align-items: center;
            max-width: 400px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification i {
            margin-right: 15px;
            font-size: 1.8rem;
        }
        
        .notification.error {
            background: var(--accent);
        }
        
        .notification.warning {
            background: var(--warning);
            color: #333;
        }
        
        .security-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(39, 174, 96, 0.2);
            border: 1px solid var(--success);
            border-radius: 50px;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            font-size: 1rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            backdrop-filter: blur(5px);
        }
        
        body.light-theme .security-badge {
            background: rgba(39, 174, 96, 0.15);
            color: #333;
        }
        
        .security-badge i {
            margin-right: 10px;
            color: var(--success);
            font-size: 1.2rem;
        }
        
        .download-options {
            display: none;
            position: absolute;
            background: rgba(0, 0, 0, 0.95);
            border-radius: 12px;
            padding: 15px;
            z-index: 100;
            box-shadow: 0 15px 35px rgba(0,0,0,0.5);
            border: 1px solid rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            top: 100%;
            left: 0;
            width: 100%;
            margin-top: 10px;
            animation: fadeIn 0.3s ease;
        }
        
        body.light-theme .download-options {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            border: 1px solid rgba(0,0,0,0.1);
        }
        
        .download-options.show {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .download-option {
            padding: 12px 20px;
            border-radius: 8px;
            background: rgba(255,255,255,0.08);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            font-size: 1rem;
        }
        
        body.light-theme .download-option {
            background: rgba(0,0,0,0.05);
        }
        
        .download-option:hover {
            background: rgba(255,255,255,0.15);
            transform: translateX(5px);
        }
        
        body.light-theme .download-option:hover {
            background: rgba(0,0,0,0.08);
        }
        
        .download-option i {
            margin-right: 12px;
            font-size: 1.2rem;
        }
        
        .progress-bar {
            height: 6px;
            background: rgba(255,255,255,0.15);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 12px;
            position: relative;
        }
        
        body.light-theme .progress-bar {
            background: rgba(0,0,0,0.1);
        }
        
        .progress {
            height: 100%;
            background: var(--secondary);
            width: 0%;
            transition: width 0.7s cubic-bezier(0.215, 0.610, 0.355, 1);
            position: relative;
        }
        
        .progress::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: progressShine 2s infinite;
        }
        
        .plugins-container {
            max-height: 180px;
            overflow-y: auto;
            padding: 12px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            margin-top: 12px;
            border: 1px solid rgba(255,255,255,0.05);
        }
        
        body.light-theme .plugins-container {
            background: rgba(0,0,0,0.05);
            border: 1px solid rgba(0,0,0,0.05);
        }
        
        .plugin-item {
            padding: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.08);
            display: flex;
            align-items: center;
        }
        
        body.light-theme .plugin-item {
            border-bottom: 1px solid rgba(0,0,0,0.08);
        }
        
        .plugin-item:last-child {
            border-bottom: none;
        }
        
        .plugin-item i {
            margin-right: 10px;
            color: var(--secondary);
        }
        
        .battery-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 5px;
        }
        
        .battery-level {
            width: 100%;
            height: 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        body.light-theme .battery-level {
            background: rgba(0,0,0,0.1);
            border: 1px solid rgba(0,0,0,0.1);
        }
        
        .battery-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--success));
            border-radius: 10px;
            transition: width 0.5s ease;
        }
        
        @media (max-width: 992px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            header h1 {
                font-size: 2.8rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 350px;
                justify-content: center;
            }
            
            .map-overlay {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
        }
        
        @media (max-width: 576px) {
            header h1 {
                font-size: 2.2rem;
            }
            
            .card {
                padding: 20px;
            }
            
            .card-header h2 {
                font-size: 1.6rem;
            }
            
            .info-item {
                padding: 15px;
            }
        }
        
        .tooltip {
            position: relative;
            cursor: help;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 280px;
            background-color: rgba(0,0,0,0.95);
            color: #fff;
            text-align: center;
            border-radius: 8px;
            padding: 12px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.95rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        
        body.light-theme .tooltip .tooltiptext {
            background-color: rgba(255,255,255,0.95);
            color: #333;
            border: 1px solid rgba(0,0,0,0.1);
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 30;
            flex-direction: column;
            color: white;
            border-radius: 15px;
            backdrop-filter: blur(5px);
        }
        
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 6px solid rgba(255,255,255,0.2);
            border-radius: 50%;
            border-top: 6px solid var(--secondary);
            animation: spin 1.2s linear infinite;
            margin-bottom: 25px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .real-time {
            color: #2ecc71;
            font-weight: 600;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        
        .geolocation-pin {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -100%);
            color: var(--accent);
            font-size: 2.5rem;
            text-shadow: 0 0 10px rgba(231, 76, 60, 0.7);
            z-index: 15;
            pointer-events: none;
        }
        
        .location-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 10px;
        }
        
        body.light-theme .location-details {
            background: rgba(0,0,0,0.05);
        }
        
        .location-item {
            display: flex;
            flex-direction: column;
        }
        
        .location-item .label {
            font-size: 0.9rem;
            color: #bdc3c7;
            margin-bottom: 5px;
        }
        
        body.light-theme .location-item .label {
            color: #666;
        }
        
        .location-item .value {
            font-size: 1.1rem;
            font-weight: 600;
            color: white;
        }
        
        body.light-theme .location-item .value {
            color: #333;
        }
        
        .chart-container {
            height: 200px;
            margin-top: 20px;
            position: relative;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        
        .stat-card {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        body.light-theme .stat-card {
            background: rgba(255, 255, 255, 0.65);
            border: 1px solid rgba(0,0,0,0.05);
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin: 10px 0;
            background: linear-gradient(to right, var(--chart1), var(--chart2));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .stat-label {
            font-size: 1rem;
            color: #bdc3c7;
        }
        
        body.light-theme .stat-label {
            color: #666;
        }
        
        .data-usage {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            font-size: 0.9rem;
            color: #bdc3c7;
        }
        
        body.light-theme .data-usage {
            color: #666;
        }
        
        .tab-container {
            margin-bottom: 25px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            padding: 10px 20px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }
        
        body.light-theme .tab-btn {
            background: rgba(0,0,0,0.05);
            border: 1px solid rgba(0,0,0,0.1);
        }
        
        .tab-btn.active {
            background: var(--secondary);
            border-color: rgba(52, 152, 219, 0.5);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        .system-info {
            background: rgba(0, 0, 0, 0.15);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }
        
        body.light-theme .system-info {
            background: rgba(0,0,0,0.05);
        }
        
        .system-info-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        body.light-theme .system-info-item {
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        .system-info-item:last-child {
            border-bottom: none;
        }
        
        .privacy-badge {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(52, 152, 219, 0.15);
            border: 1px solid var(--secondary);
            border-radius: 50px;
            padding: 8px 15px;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            backdrop-filter: blur(5px);
            z-index: 5;
        }
        
        body.light-theme .privacy-badge {
            background: rgba(52, 152, 219, 0.1);
            color: #333;
        }
        
        .privacy-badge i {
            margin-right: 8px;
            color: var(--secondary);
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
            margin-top: 10px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: var(--transition);
            border-radius: 34px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: var(--transition);
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: var(--success);
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(30px);
        }
        
        .theme-preview {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 10px;
            display: inline-block;
            vertical-align: middle;
        }
        
        .theme-preview.dark {
            background: linear-gradient(135deg, #1a2a3a, #0d1b26);
        }
        
        .theme-preview.light {
            background: linear-gradient(135deg, #f0f2f5, #e4e7eb);
        }
        
        .theme-preview.blue {
            background: linear-gradient(135deg, #0c2461, #1e3799);
        }
        
        .theme-preview.green {
            background: linear-gradient(135deg, #1e453e, #0d2b23);
        }
        
        .theme-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .theme-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.3s ease;
            border: 2px solid transparent;
        }
        
        .theme-option:hover {
            transform: scale(1.1);
        }
        
        .theme-option.active {
            border: 2px solid var(--light);
            box-shadow: 0 0 0 2px var(--secondary);
        }
        
        body.light-theme .theme-option.active {
            border: 2px solid var(--dark);
        }
        
        .theme-option[data-theme="dark"] {
            background: linear-gradient(135deg, #1a2a3a, #0d1b26);
        }
        
        .theme-option[data-theme="light"] {
            background: linear-gradient(135deg, #f0f2f5, #e4e7eb);
        }
        
        .theme-option[data-theme="blue"] {
            background: linear-gradient(135deg, #0c2461, #1e3799);
        }
        
        .theme-option[data-theme="green"] {
            background: linear-gradient(135deg, #1e453e, #0d2b23);
        }
        
        .language-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .language-option {
            padding: 8px 15px;
            background: rgba(0,0,0,0.2);
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
        }
        
        body.light-theme .language-option {
            background: rgba(0,0,0,0.05);
        }
        
        .language-option.active {
            background: var(--secondary);
            color: white;
        }
        
        .data-export-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 2000;
            color: white;
            backdrop-filter: blur(10px);
        }
        
        .data-export-progress h3 {
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        
        .export-progress-bar {
            width: 80%;
            max-width: 400px;
            height: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .export-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), var(--success));
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .export-status {
            margin-top: 15px;
            font-size: 1.1rem;
        }
    </style>
</head>
<body class="dark-theme">
    <div class="container">
        <header>
            <h1>Qurilmainfobot</h1>
            <p>Ushbu ilova sizning qurilmangiz, brauzeringiz, tarmoq sozlamalaringiz va joylashuvingiz haqida barcha kerakli ma'lumotlarni to'playdi</p>
            <div class="security-info">
                <i class="fas fa-lock"></i> 
                <span>Barcha ma'lumotlar faqat sizning qurilmangizda saqlanadi va hech qanday serverga yuborilmaydi. Ma'lumotlarni faqat siz ko'rishingiz mumkin.</span>
            </div>
        </header>
        
        <div class="security-badge">
            <i class="fas fa-shield-alt"></i>
            <span id="encryptionStrength">256-bit AES Shifrlash</span>
        </div>
        
        <div class="tab-container">
            <button class="tab-btn active" data-tab="dashboard">Asosiy ma'lumotlar</button>
            <button class="tab-btn" data-tab="performance">Ishlash statistikasi</button>
            <button class="tab-btn" data-tab="settings">Sozlamalar</button>
            <button class="tab-btn" data-tab="history">Tarix</button>
        </div>
        
        <div class="tab-content active" id="dashboard-tab">
            <div class="dashboard">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-desktop"></i>
                        <h2>Qurilma Ma'lumotlari</h2>
                    </div>
                    <div class="info-grid">
                        <div class="info-item">
                            <h3><i class="fas fa-window-maximize"></i> Brauzer</h3>
                            <p id="browserInfo">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-microchip"></i> Operatsion Sistema</h3>
                            <p id="osInfo">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-mobile-alt"></i> Qurilma Turi</h3>
                            <p id="deviceType">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-cogs"></i> Protsessor</h3>
                            <p id="cpuInfo">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-memory"></i> Operativ Xotira</h3>
                            <p id="ramInfo">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-hdd"></i> Saqlash Joyi</h3>
                            <p id="storageInfo">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-plug"></i> Brauzer Plaginlari</h3>
                            <div class="plugins-container" id="pluginsList">
                                <div class="plugin-item"><i class="fas fa-spinner fa-spin"></i> Aniqlanmoqda...</div>
                            </div>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-battery-full"></i> Batareya Holati</h3>
                            <p id="batteryStatus">Aniqlanmoqda...</p>
                            <div class="battery-container">
                                <i class="fas fa-battery-full"></i>
                                <div class="battery-level">
                                    <div class="battery-fill" id="batteryFill" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-fingerprint"></i> Qurilma ID</h3>
                            <p id="deviceId">Aniqlanmoqda...</p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-network-wired"></i>
                        <h2>Tarmoq Ma'lumotlari</h2>
                    </div>
                    <div class="info-grid">
                        <div class="info-item">
                            <h3><i class="fas fa-address-card"></i> IP Manzili</h3>
                            <p id="ipAddress">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-map-marker-alt"></i> Joylashuv</h3>
                            <p id="location">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-wifi"></i> Tarmoq Turi</h3>
                            <p id="connectionType">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-tachometer-alt"></i> Tarmoq Tezligi</h3>
                            <p><span id="networkSpeed">Aniqlanmoqda...</span> <span class="real-time">real-time</span></p>
                            <div class="progress-bar">
                                <div class="progress" id="speedProgress"></div>
                            </div>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-globe"></i> Provayder</h3>
                            <p id="isp">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-shield-alt"></i> Xavfsizlik</h3>
                            <p id="security">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-certificate"></i> SSL Certifikati</h3>
                            <p id="sslInfo">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-satellite"></i> Ping & Latensiya</h3>
                            <p id="pingInfo">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-server"></i> Tarmoq Tafsilotlari</h3>
                            <p id="networkDetails">Aniqlanmoqda...</p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-eye"></i>
                        <h2>Ekran & Muhit Ma'lumotlari</h2>
                    </div>
                    <div class="info-grid">
                        <div class="info-item">
                            <h3><i class="fas fa-expand"></i> Ekran O'lchami</h3>
                            <p id="screenSize">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-palette"></i> Rang Chuqurligi</h3>
                            <p id="colorDepth">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-columns"></i> Piksellik Nisbati</h3>
                            <p id="pixelRatio">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-compress-alt"></i> Viewport O'lchami</h3>
                            <p id="viewportSize">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-language"></i> Tili</h3>
                            <p id="language">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-clock"></i> Vaqt Zonasi</h3>
                            <p id="timezone">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-touchpad"></i> Sensorlar</h3>
                            <p id="sensors">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-cookie"></i> Brauzer Belgilari</h3>
                            <p id="cookies">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-database"></i> Saqlash Imkoniyatlari</h3>
                            <p id="storageCapabilities">Aniqlanmoqda...</p>
                        </div>
                        <div class="info-item">
                            <h3><i class="fas fa-microphone"></i> Audio Tizimi</h3>
                            <p id="audioInfo">Aniqlanmoqda...</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-map-marked-alt"></i>
                    <h2>Aniq Geolokatsiya</h2>
                </div>
                <div class="map-container">
                    <div id="map"></div>
                    <div class="geolocation-pin">
                        <i class="fas fa-location-dot"></i>
                    </div>
                    <div class="map-overlay">
                        <div>
                            <h3>Aniq Joylashuv:</h3>
                            <p id="exactLocation">Aniqlanmoqda...</p>
                            <div class="location-details" id="locationDetails">
                                <div class="location-item">
                                    <span class="label">Ko'cha</span>
                                    <span class="value" id="street">Aniqlanmoqda...</span>
                                </div>
                                <div class="location-item">
                                    <span class="label">Shahar</span>
                                    <span class="value" id="city">Aniqlanmoqda...</span>
                                </div>
                                <div class="location-item">
                                    <span class="label">Viloyat</span>
                                    <span class="value" id="region">Aniqlanmoqda...</span>
                                </div>
                                <div class="location-item">
                                    <span class="label">Mamlakat</span>
                                    <span class="value" id="country">Aniqlanmoqda...</span>
                                </div>
                            </div>
                        </div>
                        <div id="accuracyIndicator">
                            <i class="fas fa-bullseye"></i>
                            <span>Aniqlik: <span id="accuracyValue">0</span> metr</span>
                        </div>
                    </div>
                    <div class="loading-overlay" id="mapLoading">
                        <div class="loading-spinner"></div>
                        <p>Xarita yuklanmoqda...</p>
                    </div>
                    <div class="privacy-badge">
                        <i class="fas fa-user-secret"></i>
                        <span>Joylashuv ma'lumotlari maxfiy saqlanadi</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="performance-tab">
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-chart-line"></i>
                    <h2>Tarmoq Tezligi Statistikasi</h2>
                </div>
                <div class="chart-container">
                    <canvas id="networkChart"></canvas>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <i class="fas fa-tachometer-alt fa-2x" style="color: var(--chart1);"></i>
                        <div class="stat-value" id="avgSpeed">0 Mbps</div>
                        <div class="stat-label">O'rtacha tezlik</div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-bolt fa-2x" style="color: var(--chart2);"></i>
                        <div class="stat-value" id="maxSpeed">0 Mbps</div>
                        <div class="stat-label">Maksimal tezlik</div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-history fa-2x" style="color: var(--chart3);"></i>
                        <div class="stat-value" id="minPing">0 ms</div>
                        <div class="stat-label">Minimal ping</div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-network-wired fa-2x" style="color: var(--chart4);"></i>
                        <div class="stat-value" id="stability">0%</div>
                        <div class="stat-label">Tarmoq barqarorligi</div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-microchip"></i>
                    <h2>Tizim Resurslari</h2>
                </div>
                <div class="chart-container">
                    <canvas id="systemChart"></canvas>
                </div>
                <div class="system-info">
                    <div class="system-info-item">
                        <span>CPU foydalanishi:</span>
                        <span id="cpuUsage">Aniqlanmoqda...</span>
                    </div>
                    <div class="system-info-item">
                        <span>Operativ xotira:</span>
                        <span id="memoryUsage">Aniqlanmoqda...</span>
                    </div>
                    <div class="system-info-item">
                        <span>Disk foydalanishi:</span>
                        <span id="diskUsage">Aniqlanmoqda...</span>
                    </div>
                    <div class="system-info-item">
                        <span>Qurilma harorati:</span>
                        <span id="deviceTemp">Aniqlanmoqda...</span>
                    </div>
                    <div class="system-info-item">
                        <span>GPU ma'lumotlari:</span>
                        <span id="gpuInfo">Aniqlanmoqda...</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="settings-tab">
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-cog"></i>
                    <h2>Sozlamalar va Maxfiylik</h2>
                </div>
                <div class="info-grid">
                    <div class="info-item">
                        <h3><i class="fas fa-shield-alt"></i> Ma'lumotlarni to'plash</h3>
                        <div class="toggle-switch">
                            <input type="checkbox" id="dataCollection" checked>
                            <label for="dataCollection" class="toggle-slider"></label>
                        </div>
                        <p style="font-size: 0.9rem; margin-top: 10px;">Ma'lumotlarni to'plash va tahlil qilish</p>
                    </div>
                    <div class="info-item">
                        <h3><i class="fas fa-map-marker-alt"></i> Geolokatsiya</h3>
                        <div class="toggle-switch">
                            <input type="checkbox" id="geolocation" checked>
                            <label for="geolocation" class="toggle-slider"></label>
                        </div>
                        <p style="font-size: 0.9rem; margin-top: 10px;">Joylashuv ma'lumotlarini to'plash</p>
                    </div>
                    <div class="info-item">
                        <h3><i class="fas fa-history"></i> Statistikani saqlash</h3>
                        <div class="toggle-switch">
                            <input type="checkbox" id="saveStats" checked>
                            <label for="saveStats" class="toggle-slider"></label>
                        </div>
                        <p style="font-size: 0.9rem; margin-top: 10px;">Statistikani brauzerda saqlash</p>
                    </div>
                    <div class="info-item">
                        <h3><i class="fas fa-bell"></i> Bildirishnomalar</h3>
                        <div class="toggle-switch">
                            <input type="checkbox" id="notifications" checked>
                            <label for="notifications" class="toggle-slider"></label>
                        </div>
                        <p style="font-size: 0.9rem; margin-top: 10px;">Yangilanishlar haqida xabardor qilish</p>
                    </div>
                    <div class="info-item">
                        <h3><i class="fas fa-palette"></i> Mavzu</h3>
                        <div class="theme-selector">
                            <div class="theme-option active" data-theme="dark" title="Tungi mavzu"></div>
                            <div class="theme-option" data-theme="light" title="Kunduzgi mavzu"></div>
                            <div class="theme-option" data-theme="blue" title="Ko'k mavzu"></div>
                            <div class="theme-option" data-theme="green" title="Yashil mavzu"></div>
                        </div>
                    </div>
                    <div class="info-item">
                        <h3><i class="fas fa-language"></i> Tili</h3>
                        <div class="language-selector">
                            <div class="language-option active" data-lang="uz">O'zbekcha</div>
                            <div class="language-option" data-lang="en">English</div>
                            <div class="language-option" data-lang="ru">Русский</div>
                        </div>
                    </div>
                    <div class="info-item">
                        <h3><i class="fas fa-history"></i> Avtoyangilash</h3>
                        <select id="autoRefresh" style="width: 100%; padding: 10px; margin-top: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: white;">
                            <option value="0">O'chirilgan</option>
                            <option value="10">Har 10 soniyada</option>
                            <option value="30" selected>Har 30 soniyada</option>
                            <option value="60">Har 1 daqiqada</option>
                            <option value="300">Har 5 daqiqada</option>
                        </select>
                    </div>
                    <div class="info-item">
                        <h3><i class="fas fa-save"></i> Avtosaqlash</h3>
                        <select id="autoSave" style="width: 100%; padding: 10px; margin-top: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: white;">
                            <option value="0">O'chirilgan</option>
                            <option value="60">Har 1 daqiqada</option>
                            <option value="300" selected>Har 5 daqiqada</option>
                            <option value="1800">Har 30 daqiqada</option>
                            <option value="3600">Har soatda</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-database"></i>
                    <h2>Ma'lumotlar Boshqaruvi</h2>
                </div>
                <div class="controls">
                    <button class="btn btn-primary" id="backupBtn">
                        <i class="fas fa-save"></i> Zaxira nusxasi
                    </button>
                    <button class="btn btn-success" id="exportBtn">
                        <i class="fas fa-file-export"></i> Eksport qilish
                    </button>
                    <button class="btn btn-danger" id="resetBtn">
                        <i class="fas fa-trash-restore"></i> Statistikani tiklash
                    </button>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="history-tab">
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-history"></i>
                    <h2>Ma'lumotlar Tarixi</h2>
                </div>
                <div class="chart-container">
                    <canvas id="historyChart"></canvas>
                </div>
                <div class="info-grid">
                    <div class="info-item">
                        <h3><i class="fas fa-calendar-day"></i> Bugungi statistika</h3>
                        <p id="todayStats">0 ta o'lchov</p>
                    </div>
                    <div class="info-item">
                        <h3><i class="fas fa-calendar-week"></i> Haftalik o'rtacha</h3>
                        <p id="weeklyAvg">0 Mbps</p>
                    </div>
                    <div class="info-item">
                        <h3><i class="fas fa-database"></i> Jami ma'lumotlar</h3>
                        <p id="totalData">0 ta yozuv</p>
                    </div>
                    <div class="info-item">
                        <h3><i class="fas fa-file-export"></i> Oxirgi eksport</h3>
                        <p id="lastExport">Hech qachon</p>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-table"></i>
                    <h2>Tarmoq Tezligi Tarixi</h2>
                </div>
                <div style="max-height: 300px; overflow-y: auto; margin-top: 15px;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: rgba(0,0,0,0.2);">
                                <th style="padding: 12px; text-align: left;">Sana</th>
                                <th style="padding: 12px; text-align: left;">Tezlik (Mbps)</th>
                                <th style="padding: 12px; text-align: left;">Ping (ms)</th>
                                <th style="padding: 12px; text-align: left;">Joylashuv</th>
                            </tr>
                        </thead>
                        <tbody id="historyTable">
                            <tr>
                                <td colspan="4" style="text-align: center; padding: 20px;">Ma'lumotlar yuklanmoqda...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="controls">
            <button class="btn btn-primary" id="refreshBtn">
                <i class="fas fa-sync-alt"></i> Ma'lumotlarni Yangilash
            </button>
            <div style="position:relative;">
                <button class="btn btn-success" id="downloadBtn">
                    <i class="fas fa-download"></i> Ma'lumotlarni Yuklab Olish
                </button>
                <div class="download-options" id="downloadOptions">
                    <div class="download-option" data-format="txt">
                        <i class="fas fa-file-alt"></i> Matnli Fayl (TXT)
                    </div>
                    <div class="download-option" data-format="json">
                        <i class="fas fa-file-code"></i> JSON Formatda
                    </div>
                    <div class="download-option" data-format="csv">
                        <i class="fas fa-file-csv"></i> CSV Formatda
                    </div>
                    <div class="download-option" data-format="pdf">
                        <i class="fas fa-file-pdf"></i> PDF Formatda
                    </div>
                </div>
            </div>
            <button class="btn btn-danger" id="clearBtn">
                <i class="fas fa-trash-alt"></i> Ma'lumotlarni Tozalash
            </button>
            <button class="btn btn-info" id="detailsBtn">
                <i class="fas fa-info-circle"></i> Tafsilotlar
            </button>
        </div>
    </div>
    
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText">Ma'lumotlar muvaffaqiyatli yangilandi!</span>
    </div>
    
    <div class="data-export-progress" id="exportProgress" style="display: none;">
        <h3>Ma'lumotlar eksport qilinmoqda...</h3>
        <div class="export-progress-bar">
            <div class="export-progress-fill" id="exportProgressFill"></div>
        </div>
        <div class="export-status" id="exportStatus">Tayyorlanmoqda...</div>
    </div>
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Asosiy funksiyalar
        let map, marker;
        let collectedData = {
            networkHistory: [],
            performanceStats: {
                maxSpeed: 0,
                minPing: 9999,
                avgSpeed: 0,
                stability: 0
            },
            history: [],
            settings: {
                theme: 'dark',
                language: 'uz',
                autoRefresh: 30,
                autoSave: 300
            }
        };
        let networkSpeedInterval, autoSaveInterval;
        let networkChart, systemChart, historyChart;
        let cpuUsageData = [];
        let memoryUsageData = [];
        
        // Qurilma ma'lumotlarini aniqlash
        function detectBrowser() {
            const userAgent = navigator.userAgent;
            let browserName, fullVersion;
            
            if (userAgent.includes("Chrome") && !userAgent.includes("Edg")) {
                browserName = "Google Chrome";
                fullVersion = userAgent.match(/Chrome\/(\d+\.\d+)/)[1];
            } else if (userAgent.includes("Firefox")) {
                browserName = "Mozilla Firefox";
                fullVersion = userAgent.match(/Firefox\/(\d+\.\d+)/)[1];
            } else if (userAgent.includes("Safari") && !userAgent.includes("Chrome")) {
                browserName = "Apple Safari";
                fullVersion = userAgent.match(/Version\/(\d+\.\d+)/)[1];
            } else if (userAgent.includes("Edg")) {
                browserName = "Microsoft Edge";
                fullVersion = userAgent.match(/Edg\/(\d+\.\d+)/)[1];
            } else if (userAgent.includes("Opera") || userAgent.includes("OPR")) {
                browserName = "Opera";
                fullVersion = userAgent.match(/(?:Opera|OPR)\/(\d+\.\d+)/)[1];
            } else {
                browserName = "Noma'lum brauzer";
                fullVersion = parseFloat(navigator.appVersion).toFixed(1);
            }
            
            return `${browserName} v${fullVersion}`;
        }
        
        function detectOS() {
            const userAgent = navigator.userAgent;
            let os = "Noma'lum OS";
            
            if (userAgent.match(/Win(dows|NT)/i)) {
                os = "Windows";
                if (userAgent.match(/NT 10.0/)) os += " 10/11";
                else if (userAgent.match(/NT 6.3/)) os += " 8.1";
                else if (userAgent.match(/NT 6.2/)) os += " 8";
                else if (userAgent.match(/NT 6.1/)) os += " 7";
            } else if (userAgent.match(/Macintosh|Mac OS X/i)) {
                os = "macOS";
                const match = userAgent.match(/Mac OS X (\d+[._]\d+)/);
                if (match) os += ` ${match[1].replace('_', '.')}`;
            } else if (userAgent.match(/Linux/i)) {
                os = "Linux";
            } else if (userAgent.match(/Android/i)) {
                os = "Android";
                const match = userAgent.match(/Android (\d+\.\d+)/);
                if (match) os += ` ${match[1]}`;
            } else if (userAgent.match(/iPhone|iPad|iPod/i)) {
                os = "iOS";
                const match = userAgent.match(/OS (\d+_\d+)/);
                if (match) os += ` ${match[1].replace('_', '.')}`;
            }
            
            return os;
        }
        
        function detectDeviceType() {
            const userAgent = navigator.userAgent;
            const touchPoints = navigator.maxTouchPoints || 0;
            
            if (/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(userAgent)) {
                return "Planshet";
            } else if (/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(userAgent)) {
                return "Smartfon";
            } else if (touchPoints > 0) {
                return "Sensorli Ekranli Kompyuter";
            }
            return "Kompyuter";
        }
        
        function getCPUInfo() {
            const cores = navigator.hardwareConcurrency || "Noma'lum";
            const arch = navigator.userAgent.match(/x86_64|Win64|WOW64/) ? "64-bit" : 
                        navigator.userAgent.match(/x86|Win32|WOW32/) ? "32-bit" : "Noma'lum";
            return `${cores} yadro, ${arch} arxitektura`;
        }
        
        function getRAMInfo() {
            if (navigator.deviceMemory) {
                return `${navigator.deviceMemory} GB`;
            }
            return "Noma'lum";
        }
        
        function getGPUInfo() {
            try {
                const canvas = document.createElement('canvas');
                const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
                if (!gl) return "WebGL qo'llab-quvvatlanmaydi";
                
                const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
                if (debugInfo) {
                    return gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
                }
                return "GPU ma'lumotlari mavjud emas";
            } catch (e) {
                return "GPU aniqlanmadi";
            }
        }
        
        function getDeviceId() {
            try {
                // Brauzer plaginlari va mavjud funksiyalardan foydalanib unikal ID yaratish
                const plugins = Array.from(navigator.plugins).map(p => p.name).join(',');
                const mimeTypes = Array.from(navigator.mimeTypes).map(m => m.type).join(',');
                const canvasFingerprint = () => {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    ctx.textBaseline = 'top';
                    ctx.font = '14px Arial';
                    ctx.fillStyle = '#f60';
                    ctx.fillRect(125, 1, 62, 20);
                    ctx.fillStyle = '#069';
                    ctx.fillText('ID', 2, 15);
                    return canvas.toDataURL();
                };
                
                return btoa(plugins + mimeTypes + canvasFingerprint()).substring(0, 16);
            } catch (e) {
                return "Unikal ID yaratib bo'lmadi";
            }
        }
        
        function getAudioInfo() {
            try {
                const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioCtx.createOscillator();
                const analyser = audioCtx.createAnalyser();
                oscillator.connect(analyser);
                analyser.connect(audioCtx.destination);
                oscillator.start();
                
                // Audio qobiliyatini tekshirish
                const capabilities = [];
                if (audioCtx) capabilities.push("AudioContext");
                if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) capabilities.push("Mikrofon");
                if (navigator.mediaDevices && navigator.mediaDevices.getDisplayMedia) capabilities.push("Ekran ovozini yozish");
                
                oscillator.stop();
                return capabilities.length > 0 ? capabilities.join(", ") : "Audio qobiliyatlari topilmadi";
            } catch (e) {
                return "Audio tizimi aniqlanmadi";
            }
        }
        
        async function getActualStorage() {
            if (navigator.storage && navigator.storage.estimate) {
                try {
                    const estimate = await navigator.storage.estimate();
                    const usageMB = (estimate.usage / (1024 * 1024)).toFixed(2);
                    const quotaMB = (estimate.quota / (1024 * 1024)).toFixed(2);
                    return `Foydalanilgan: ${usageMB} MB, Jami: ${quotaMB} MB`;
                } catch (e) {
                    return "Saqlash hajmi: Noma'lum";
                }
            }
            return "Saqlash hajmi: Noma'lum";
        }
        
        function getPluginsList() {
            try {
                const plugins = Array.from(navigator.plugins).map(plugin => plugin.name);
                return plugins.length > 0 ? plugins : ["Hech qanday plagin topilmadi"];
            } catch (e) {
                return ["Plaginlarni aniqlab bo'lmadi"];
            }
        }
        
        function getConnectionType() {
            const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
            if (connection) {
                return connection.effectiveType ? connection.effectiveType.charAt(0).toUpperCase() + connection.effectiveType.slice(1) : "Noma'lum";
            }
            return "Noma'lum";
        }
        
        function getNetworkDetails() {
            const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
            if (connection) {
                let details = [];
                if (connection.type) details.push(`Turi: ${connection.type}`);
                if (connection.downlink) details.push(`Tezlik: ${connection.downlink} Mbps`);
                if (connection.rtt) details.push(`RTT: ${connection.rtt} ms`);
                if (connection.saveData) details.push(`Saqlash rejimi: ${connection.saveData ? 'Yoqilgan' : 'Oʻchirilgan'}`);
                return details.join(', ');
            }
            return "Tarmoq tafsilotlari mavjud emas";
        }
        
        async function measureNetworkSpeed() {
            try {
                const startTime = performance.now();
                const testFile = "https://proof.ovh.net/files/10Mb.dat?t=" + Date.now();
                
                const response = await fetch(testFile, { mode: 'no-cors', cache: 'no-store' });
                if (!response.ok) throw new Error("Serverdan javob kelmadi");
                
                const endTime = performance.now();
                const duration = (endTime - startTime) / 1000;
                const bitsLoaded = 10 * 8 * 1024 * 1024;
                const speedMbps = (bitsLoaded / duration / 1000000).toFixed(2);
                
                // Statistikani yangilash
                collectedData.networkHistory.push({
                    speed: parseFloat(speedMbps),
                    timestamp: new Date().toLocaleTimeString(),
                    date: new Date().toLocaleDateString()
                });
                
                // Tarixga qo'shish
                collectedData.history.push({
                    speed: parseFloat(speedMbps),
                    timestamp: new Date().toISOString(),
                    location: collectedData.location || "Noma'lum"
                });
                
                // Tarixni cheklab qo'yish
                if (collectedData.networkHistory.length > 50) {
                    collectedData.networkHistory.shift();
                }
                
                if (collectedData.history.length > 100) {
                    collectedData.history.shift();
                }
                
                return speedMbps;
            } catch (error) {
                console.error("Tarmoq tezligini o'lchashda xatolik:", error);
                return "Noma'lum";
            }
        }
        
        function calculatePerformanceStats() {
            if (collectedData.networkHistory.length === 0) return;
            
            const speeds = collectedData.networkHistory.map(item => item.speed);
            const pings = collectedData.networkHistory.map(item => item.ping || 0);
            
            collectedData.performanceStats.maxSpeed = Math.max(...speeds).toFixed(2);
            collectedData.performanceStats.minPing = Math.min(...pings.filter(p => p > 0)).toFixed(0);
            collectedData.performanceStats.avgSpeed = (speeds.reduce((a, b) => a + b, 0) / speeds.length).toFixed(2);
            
            // Barqarorlikni hisoblash (tezlikning standart chetlanishi)
            const avg = collectedData.performanceStats.avgSpeed;
            const variance = speeds.reduce((a, b) => a + Math.pow(b - avg, 2), 0) / speeds.length;
            collectedData.performanceStats.stability = (100 - Math.sqrt(variance)).toFixed(0);
            
            // UI ni yangilash
            document.getElementById('avgSpeed').textContent = collectedData.performanceStats.avgSpeed + " Mbps";
            document.getElementById('maxSpeed').textContent = collectedData.performanceStats.maxSpeed + " Mbps";
            document.getElementById('minPing').textContent = collectedData.performanceStats.minPing + " ms";
            document.getElementById('stability').textContent = collectedData.performanceStats.stability + "%";
        }
        
        function updateHistoryStats() {
            const today = new Date().toLocaleDateString();
            const todayStats = collectedData.history.filter(item => 
                new Date(item.timestamp).toLocaleDateString() === today
            ).length;
            
            const lastWeekData = collectedData.history.filter(item => 
                new Date(item.timestamp) > new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)
            );
            
            const weeklyAvg = lastWeekData.length > 0 ? 
                (lastWeekData.reduce((sum, item) => sum + item.speed, 0) / lastWeekData.length).toFixed(2) : 0;
            
            document.getElementById('todayStats').textContent = `${todayStats} ta o'lchov`;
            document.getElementById('weeklyAvg').textContent = `${weeklyAvg} Mbps`;
            document.getElementById('totalData').textContent = `${collectedData.history.length} ta yozuv`;
            
            // Tarix jadvalini yangilash
            const historyTable = document.getElementById('historyTable');
            historyTable.innerHTML = '';
            
            // Faqat oxirgi 10 ta yozuvni ko'rsatish
            const recentHistory = collectedData.history.slice(-10).reverse();
            
            if (recentHistory.length === 0) {
                historyTable.innerHTML = `
                    <tr>
                        <td colspan="4" style="text-align: center; padding: 20px;">Ma'lumotlar mavjud emas</td>
                    </tr>
                `;
                return;
            }
            
            recentHistory.forEach(item => {
                const date = new Date(item.timestamp);
                const row = document.createElement('tr');
                row.style.borderBottom = '1px solid rgba(255,255,255,0.1)';
                row.innerHTML = `
                    <td style="padding: 12px;">${date.toLocaleString()}</td>
                    <td style="padding: 12px;">${item.speed} Mbps</td>
                    <td style="padding: 12px;">${item.ping || 'N/A'} ms</td>
                    <td style="padding: 12px;">${item.location || 'N/A'}</td>
                `;
                historyTable.appendChild(row);
            });
        }
        
        async function getPing() {
            try {
                const startTime = performance.now();
                await fetch('https://www.google.com', { method: 'HEAD', mode: 'no-cors', cache: 'no-store' });
                const endTime = performance.now();
                return Math.round(endTime - startTime);
            } catch (error) {
                return "Noma'lum";
            }
        }
        
        async function getIPAddress() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                console.error("IP manzilini olishda xatolik:", error);
                return "Noma'lum";
            }
        }
        
        async function getLocationFromIP(ip) {
            try {
                if (ip === "Noma'lum") {
                    return "Joylashuv aniqlanmadi";
                }
                
                const response = await fetch(`https://ipapi.co/${ip}/json/`);
                const data = await response.json();
                
                if (data.city && data.country) {
                    collectedData.locationDetails = {
                        city: data.city || "Noma'lum",
                        region: data.region || "Noma'lum",
                        country: data.country || "Noma'lum",
                        postal: data.postal || "Noma'lum",
                        street: data.street || "Noma'lum",
                        latitude: data.latitude || null,
                        longitude: data.longitude || null
                    };
                    
                    return `${data.city}, ${data.region}, ${data.country}`;
                } else {
                    return "Joylashuv aniqlanmadi";
                }
            } catch (error) {
                console.error("IP orqali joylashuvni olishda xatolik:", error);
                return "Joylashuv aniqlanmadi";
            }
        }
        
        function getGeolocation() {
            return new Promise((resolve) => {
                if (!navigator.geolocation) {
                    resolve({ location: "Geolokatsiya qo'llanmasi yo'q", accuracy: 0 });
                    return;
                }
                
                navigator.geolocation.getCurrentPosition(
                    position => {
                        const lat = position.coords.latitude;
                        const lng = position.coords.longitude;
                        const accuracy = position.coords.accuracy;
                        
                        resolve({
                            location: `${lat.toFixed(6)}, ${lng.toFixed(6)}`,
                            accuracy: accuracy,
                            coordinates: { lat, lng }
                        });
                    },
                    error => {
                        let errorMessage = "Geolokatsiya rad etildi";
                        if (error.code === error.PERMISSION_DENIED) {
                            errorMessage = "Geolokatsiya ruxsati berilmadi";
                        } else if (error.code === error.POSITION_UNAVAILABLE) {
                            errorMessage = "Joylashuv ma'lumoti mavjud emas";
                        } else if (error.code === error.TIMEOUT) {
                            errorMessage = "So'rov vaqti tugadi";
                        }
                        resolve({ location: errorMessage, accuracy: 0 });
                    },
                    { enableHighAccuracy: true, timeout: 15000, maximumAge: 0 }
                );
            });
        }
        
        function getSSLInfo() {
            if (window.location.protocol !== 'https:') {
                return "HTTPS emas - shifrlash yo'q";
            }
            return "Tasdiqlangan SSL certifikati (256-bit shifrlash)";
        }
        
        function detectSensors() {
            try {
                const sensors = [];
                if ('getBattery' in navigator) sensors.push("Batareya");
                if ('vibrate' in navigator) sensors.push("Vibratsiya");
                if ('AmbientLightSensor' in window) sensors.push("Yorug'lik sensori");
                if ('accelerometer' in window) sensors.push("Akselerometr");
                if ('gyroscope' in window) sensors.push("Gyroskop");
                if ('magnetometer' in window) sensors.push("Magnitometr");
                if ('Geolocation' in navigator) sensors.push("Geolokatsiya");
                if ('ProximitySensor' in window) sensors.push("Masofa sensori");
                
                return sensors.length > 0 ? sensors.join(", ") : "Sensorlar topilmadi";
            } catch (e) {
                return "Sensorlarni aniqlab bo'lmadi";
            }
        }
        
        async function getBatteryStatus() {
            try {
                if ('getBattery' in navigator) {
                    const battery = await navigator.getBattery();
                    
                    collectedData.battery = {
                        level: Math.round(battery.level * 100),
                        charging: battery.charging,
                        chargingTime: battery.chargingTime,
                        dischargingTime: battery.dischargingTime
                    };
                    
                    return `${Math.round(battery.level * 100)}%${battery.charging ? " (Zaryadlanmoqda)" : ""}`;
                }
                return "Batareya ma'lumotlari mavjud emas";
            } catch (e) {
                return "Batareya ma'lumotlari olinmadi";
            }
        }
        
        function detectStorageCapabilities() {
            const capabilities = [];
            if ('localStorage' in window) capabilities.push("LocalStorage");
            if ('sessionStorage' in window) capabilities.push("SessionStorage");
            if ('indexedDB' in window) capabilities.push("IndexedDB");
            if ('caches' in window) capabilities.push("Cache Storage");
            if ('serviceWorker' in navigator) capabilities.push("Service Worker");
            
            return capabilities.length > 0 ? capabilities.join(", ") : "Saqlash imkoniyatlari topilmadi";
        }
        
        function showNotification(message, type = "success", duration = 3000) {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            notificationText.textContent = message;
            notification.className = "notification";
            
            if (type === "error") {
                notification.classList.add("error");
            } else if (type === "warning") {
                notification.classList.add("warning");
            }
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, duration);
        }
        
        function initMap(lat, lng) {
            const mapElement = document.getElementById('map');
            const mapLoading = document.getElementById('mapLoading');
            
            try {
                if (map) map.remove();
                
                map = L.map('map').setView([lat, lng], 15);
                
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(map);
                
                if (marker) map.removeLayer(marker);
                marker = L.marker([lat, lng], {
                    icon: L.divIcon({
                        className: 'custom-marker',
                        html: '<i class="fas fa-location-dot fa-2x" style="color: #e74c3c;"></i>',
                        iconSize: [40, 40],
                        iconAnchor: [20, 40]
                    })
                }).addTo(map);
                
                marker.bindPopup(`
                    <b>Sizning joylashuvingiz</b><br>
                    Kenglik: ${lat.toFixed(6)}<br>
                    Uzunlik: ${lng.toFixed(6)}<br>
                    Aniqlik: ${Math.round(collectedData.geolocation.accuracy)} metr
                `).openPopup();
                
                if (collectedData.geolocation.accuracy) {
                    L.circle([lat, lng], {
                        color: '#3498db',
                        fillColor: '#3498db',
                        fillOpacity: 0.2,
                        radius: collectedData.geolocation.accuracy || 50
                    }).addTo(map);
                }
                
                mapLoading.style.display = 'none';
            } catch (e) {
                mapLoading.innerHTML = `<p>Xarita yuklanmadi: ${e.message}</p>`;
                console.error("Xarita yuklashda xatolik:", e);
            }
        }
        
        function updateLocationDetails() {
            if (collectedData.locationDetails) {
                document.getElementById('street').textContent = collectedData.locationDetails.street || "Noma'lum";
                document.getElementById('city').textContent = collectedData.locationDetails.city || "Noma'lum";
                document.getElementById('region').textContent = collectedData.locationDetails.region || "Noma'lum";
                document.getElementById('country').textContent = collectedData.locationDetails.country || "Noma'lum";
            } else {
                document.getElementById('street').textContent = "Noma'lum";
                document.getElementById('city').textContent = "Noma'lum";
                document.getElementById('region').textContent = "Noma'lum";
                document.getElementById('country').textContent = "Noma'lum";
            }
        }
        
        function initCharts() {
            const networkCtx = document.getElementById('networkChart').getContext('2d');
            const systemCtx = document.getElementById('systemChart').getContext('2d');
            const historyCtx = document.getElementById('historyChart').getContext('2d');
            
            // Tarmoq tezligi grafigi
            networkChart = new Chart(networkCtx, {
                type: 'line',
                data: {
                    labels: collectedData.networkHistory.map(item => item.timestamp),
                    datasets: [{
                        label: 'Tarmoq tezligi (Mbps)',
                        data: collectedData.networkHistory.map(item => item.speed),
                        borderColor: 'rgba(52, 152, 219, 1)',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        borderWidth: 2,
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#ecf0f1' }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#bdc3c7' }
                        },
                        x: {
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#bdc3c7' }
                        }
                    }
                }
            });
            
            // Tizim resurslari grafigi
            systemChart = new Chart(systemCtx, {
                type: 'bar',
                data: {
                    labels: ['CPU', 'Xotira', 'Internet', 'Batareya'],
                    datasets: [{
                        label: 'Foydalanish darajasi (%)',
                        data: [65, 45, 80, 30],
                        backgroundColor: [
                            'rgba(52, 152, 219, 0.7)',
                            'rgba(46, 204, 113, 0.7)',
                            'rgba(155, 89, 182, 0.7)',
                            'rgba(241, 196, 15, 0.7)'
                        ],
                        borderColor: [
                            'rgba(52, 152, 219, 1)',
                            'rgba(46, 204, 113, 1)',
                            'rgba(155, 89, 182, 1)',
                            'rgba(241, 196, 15, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#bdc3c7' }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: '#bdc3c7' }
                        }
                    }
                }
            });
            
            // Tarix grafigi
            const last7Days = Array(7).fill().map((_, i) => {
                const d = new Date();
                d.setDate(d.getDate() - i);
                return d.toLocaleDateString();
            }).reverse();
            
            const dailyAvg = last7Days.map(day => {
                const dayData = collectedData.history.filter(item => 
                    new Date(item.timestamp).toLocaleDateString() === day
                );
                if (dayData.length === 0) return 0;
                return dayData.reduce((sum, item) => sum + item.speed, 0) / dayData.length;
            });
            
            historyChart = new Chart(historyCtx, {
                type: 'bar',
                data: {
                    labels: last7Days,
                    datasets: [{
                        label: 'Kunlik o\'rtacha tezlik (Mbps)',
                        data: dailyAvg,
                        backgroundColor: 'rgba(155, 89, 182, 0.7)',
                        borderColor: 'rgba(155, 89, 182, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#bdc3c7' }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: '#bdc3c7' }
                        }
                    }
                }
            });
        }
        
        function updateCharts() {
            if (networkChart) {
                networkChart.data.labels = collectedData.networkHistory.map(item => item.timestamp);
                networkChart.data.datasets[0].data = collectedData.networkHistory.map(item => item.speed);
                networkChart.update();
            }
            
            if (systemChart) {
                // Simulyatsiya qilingan tizim ma'lumotlari
                const cpuUsage = Math.floor(Math.random() * 30) + 40;
                const memoryUsage = Math.floor(Math.random() * 20) + 30;
                const internetUsage = Math.floor(Math.random() * 40) + 40;
                const batteryLevel = collectedData.battery?.level || 75;
                
                systemChart.data.datasets[0].data = [cpuUsage, memoryUsage, internetUsage, batteryLevel];
                systemChart.update();
                
                // Tizim ma'lumotlarini yangilash
                document.getElementById('cpuUsage').textContent = `${cpuUsage}%`;
                document.getElementById('memoryUsage').textContent = `${memoryUsage}%`;
                document.getElementById('diskUsage').textContent = "45%"; // Simulyatsiya
                document.getElementById('deviceTemp').textContent = `${Math.floor(Math.random() * 10) + 30}°C`; // Simulyatsiya
            }
            
            if (historyChart) {
                updateHistoryStats();
            }
        }
        
        async function updateNetworkSpeedPeriodically() {
            if (networkSpeedInterval) {
                clearInterval(networkSpeedInterval);
            }
            
            await updateNetworkSpeed();
            calculatePerformanceStats();
            updateCharts();
            
            networkSpeedInterval = setInterval(async () => {
                await updateNetworkSpeed();
                calculatePerformanceStats();
                updateCharts();
            }, collectedData.settings.autoRefresh * 1000);
        }
        
        function startAutoSave() {
            if (autoSaveInterval) {
                clearInterval(autoSaveInterval);
            }
            
            if (collectedData.settings.autoSave > 0) {
                autoSaveInterval = setInterval(() => {
                    saveDataToLocalStorage();
                    showNotification("Ma'lumotlar avtomatik saqlandi", "success", 2000);
                }, collectedData.settings.autoSave * 1000);
            }
        }
        
        async function updateNetworkSpeed() {
            try {
                collectedData.networkSpeed = await measureNetworkSpeed();
                collectedData.ping = await getPing();
                
                // Tarmoq tarixiga ping qo'shish
                if (collectedData.networkHistory.length > 0) {
                    collectedData.networkHistory[collectedData.networkHistory.length - 1].ping = collectedData.ping;
                }
                
                document.getElementById('networkSpeed').textContent = 
                    collectedData.networkSpeed === "Noma'lum" ? "Noma'lum" : `${collectedData.networkSpeed} Mbps`;
                
                document.getElementById('pingInfo').textContent = collectedData.ping === "Noma'lum" ? 
                    "Noma'lum" : `${collectedData.ping} ms`;
                
                if (collectedData.networkSpeed !== "Noma'lum") {
                    const speed = parseFloat(collectedData.networkSpeed);
                    const progress = Math.min(speed / 300 * 100, 100);
                    document.getElementById('speedProgress').style.width = `${progress}%`;
                }
                
                // Grafikni yangilash
                updateCharts();
                
            } catch (error) {
                console.error("Tarmoq tezligini yangilashda xatolik:", error);
            }
        }
        
        async function updateDeviceInfo() {
            showNotification("Ma'lumotlar yig'ilmoqda...", "warning", 5000);
            
            try {
                // Qurilma ma'lumotlari
                collectedData.browser = detectBrowser();
                collectedData.os = detectOS();
                collectedData.deviceType = detectDeviceType();
                collectedData.cpu = getCPUInfo();
                collectedData.ram = getRAMInfo();
                collectedData.storage = await getActualStorage();
                collectedData.plugins = getPluginsList();
                collectedData.batteryStatus = await getBatteryStatus();
                collectedData.storageCapabilities = detectStorageCapabilities();
                collectedData.deviceId = getDeviceId();
                collectedData.gpu = getGPUInfo();
                collectedData.audio = getAudioInfo();
                
                document.getElementById('browserInfo').textContent = collectedData.browser;
                document.getElementById('osInfo').textContent = collectedData.os;
                document.getElementById('deviceType').textContent = collectedData.deviceType;
                document.getElementById('cpuInfo').textContent = collectedData.cpu;
                document.getElementById('ramInfo').textContent = collectedData.ram;
                document.getElementById('storageInfo').textContent = collectedData.storage;
                document.getElementById('batteryStatus').textContent = collectedData.batteryStatus;
                document.getElementById('storageCapabilities').textContent = collectedData.storageCapabilities;
                document.getElementById('deviceId').textContent = collectedData.deviceId;
                document.getElementById('gpuInfo').textContent = collectedData.gpu;
                document.getElementById('audioInfo').textContent = collectedData.audio;
                
                if (collectedData.battery) {
                    document.getElementById('batteryFill').style.width = collectedData.battery.level + '%';
                }
                
                const pluginsList = document.getElementById('pluginsList');
                pluginsList.innerHTML = '';
                collectedData.plugins.forEach(plugin => {
                    const pluginItem = document.createElement('div');
                    pluginItem.className = 'plugin-item';
                    pluginItem.innerHTML = `<i class="fas fa-puzzle-piece"></i> ${plugin}`;
                    pluginsList.appendChild(pluginItem);
                });
                
                // Tarmoq ma'lumotlari
                collectedData.connectionType = getConnectionType();
                collectedData.security = window.location.protocol === "https:" ? "HTTPS (Xavfsiz)" : "HTTP (Xavfsiz emas)";
                collectedData.sslInfo = getSSLInfo();
                collectedData.networkDetails = getNetworkDetails();
                
                document.getElementById('connectionType').textContent = collectedData.connectionType;
                document.getElementById('security').textContent = collectedData.security;
                document.getElementById('sslInfo').textContent = collectedData.sslInfo;
                document.getElementById('networkDetails').textContent = collectedData.networkDetails;
                
                updateNetworkSpeedPeriodically();
                
                // Ekran ma'lumotlari
                collectedData.screenSize = `${screen.width} × ${screen.height}`;
                collectedData.colorDepth = `${screen.colorDepth} bit`;
                collectedData.pixelRatio = window.devicePixelRatio;
                collectedData.viewportSize = `${window.innerWidth} × ${window.innerHeight}`;
                collectedData.language = navigator.language;
                collectedData.timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
                collectedData.sensors = detectSensors();
                collectedData.cookies = navigator.cookieEnabled ? "Faollashtirilgan" : "O'chirilgan";
                
                document.getElementById('screenSize').textContent = collectedData.screenSize;
                document.getElementById('colorDepth').textContent = collectedData.colorDepth;
                document.getElementById('pixelRatio').textContent = collectedData.pixelRatio;
                document.getElementById('viewportSize').textContent = collectedData.viewportSize;
                document.getElementById('language').textContent = collectedData.language;
                document.getElementById('timezone').textContent = collectedData.timezone;
                document.getElementById('sensors').textContent = collectedData.sensors;
                document.getElementById('cookies').textContent = collectedData.cookies;
                
                // IP va joylashuv ma'lumotlari
                collectedData.ip = await getIPAddress();
                collectedData.location = await getLocationFromIP(collectedData.ip);
                
                document.getElementById('ipAddress').textContent = collectedData.ip;
                document.getElementById('location').textContent = collectedData.location;
                
                // Geolokatsiya
                if (document.getElementById('geolocation').checked) {
                    collectedData.geolocation = await getGeolocation();
                    
                    document.getElementById('exactLocation').textContent = collectedData.geolocation.location;
                    document.getElementById('accuracyValue').textContent = Math.round(collectedData.geolocation.accuracy);
                    
                    updateLocationDetails();
                    
                    if (collectedData.geolocation.coordinates) {
                        initMap(collectedData.geolocation.coordinates.lat, collectedData.geolocation.coordinates.lng);
                    } else if (collectedData.locationDetails && collectedData.locationDetails.latitude && collectedData.locationDetails.longitude) {
                        initMap(collectedData.locationDetails.latitude, collectedData.locationDetails.longitude);
                    } else {
                        document.getElementById('mapLoading').innerHTML = `<p>${collectedData.geolocation.location}</p>`;
                    }
                } else {
                    document.getElementById('exactLocation').textContent = "Geolokatsiya o'chirilgan";
                    document.getElementById('accuracyValue').textContent = "0";
                    document.getElementById('mapLoading').innerHTML = `<p>Geolokatsiya o'chirilgan</p>`;
                }
                
                // ISP ma'lumoti
                try {
                    const response = await fetch('https://ipapi.co/json/');
                    const data = await response.json();
                    collectedData.isp = data.org || "Noma'lum";
                    document.getElementById('isp').textContent = collectedData.isp;
                } catch {
                    document.getElementById('isp').textContent = "Noma'lum";
                }
                
                // Grafiklarni ishga tushirish
                initCharts();
                
                showNotification("Ma'lumotlar muvaffaqiyatli yangilandi!", "success", 3000);
            } catch (error) {
                console.error("Ma'lumotlarni yangilashda xatolik:", error);
                showNotification(`Xatolik: ${error.message}`, "error", 5000);
            }
        }
        
        function saveDataToLocalStorage() {
            try {
                localStorage.setItem('userData', JSON.stringify(collectedData));
                console.log("Ma'lumotlar saqlandi");
            } catch (e) {
                console.error("Ma'lumotlarni saqlashda xatolik:", e);
            }
        }
        
        function loadDataFromLocalStorage() {
            try {
                const savedData = localStorage.getItem('userData');
                if (savedData) {
                    collectedData = JSON.parse(savedData);
                    
                    // Sozlamalarni qo'llash
                    applySettings();
                    return true;
                }
            } catch (e) {
                console.error("Ma'lumotlarni yuklashda xatolik:", e);
            }
            return false;
        }
        
        function applySettings() {
            // Mavzuni qo'llash
            document.body.className = collectedData.settings.theme + '-theme';
            
            // Til sozlamalari
            document.querySelectorAll('.language-option').forEach(option => {
                option.classList.remove('active');
                if (option.getAttribute('data-lang') === collectedData.settings.language) {
                    option.classList.add('active');
                }
            });
            
            // Avtoyangilash
            document.getElementById('autoRefresh').value = collectedData.settings.autoRefresh;
            
            // Avtosaqlash
            document.getElementById('autoSave').value = collectedData.settings.autoSave;
            startAutoSave();
            
            // Toggle switchlarni sozlash
            document.getElementById('dataCollection').checked = true;
            document.getElementById('geolocation').checked = true;
            document.getElementById('saveStats').checked = true;
            document.getElementById('notifications').checked = true;
        }
        
        function downloadData(format = 'txt') {
            if (Object.keys(collectedData).length === 0) {
                showNotification("Yuklab olish uchun ma'lumotlar mavjud emas", "error", 3000);
                return;
            }
            
            const exportProgress = document.getElementById('exportProgress');
            const exportProgressFill = document.getElementById('exportProgressFill');
            const exportStatus = document.getElementById('exportStatus');
            
            exportProgress.style.display = 'flex';
            exportProgressFill.style.width = '0%';
            exportStatus.textContent = "Tayyorlanmoqda...";
            
            // Simulate progress
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += 5;
                exportProgressFill.style.width = `${progress}%`;
                if (progress >= 100) {
                    clearInterval(progressInterval);
                    exportStatus.textContent = "Yuklab olish boshlandi...";
                    setTimeout(() => {
                        exportProgress.style.display = 'none';
                        completeDownload(format);
                    }, 500);
                }
            }, 100);
        }
        
        function completeDownload(format) {
            let data, filename, mimeType;
            
            if (format === 'json') {
                data = JSON.stringify(collectedData, null, 2);
                filename = 'foydalanuvchi_malumotlari.json';
                mimeType = 'application/json';
            } else if (format === 'csv') {
                data = "Kategoriya,Parametr,Qiymat\n";
                
                // Qurilma ma'lumotlari
                data += `Qurilma,Brauzer,${collectedData.browser || ''}\n`;
                data += `Qurilma,Operatsion Sistema,${collectedData.os || ''}\n`;
                data += `Qurilma,Qurilma Turi,${collectedData.deviceType || ''}\n`;
                data += `Qurilma,Protsessor,${collectedData.cpu || ''}\n`;
                data += `Qurilma,Operativ Xotira,${collectedData.ram || ''}\n`;
                data += `Qurilma,Saqlash Joyi,${collectedData.storage || ''}\n`;
                
                // Plaginlar
                if (collectedData.plugins && collectedData.plugins.length > 0) {
                    collectedData.plugins.forEach((plugin, index) => {
                        data += `Qurilma,Plagin ${index + 1},${plugin}\n`;
                    });
                }
                
                // Tarmoq ma'lumotlari
                data += `Tarmoq,IP Manzili,${collectedData.ip || ''}\n`;
                data += `Tarmoq,Joylashuv,${collectedData.location || ''}\n`;
                data += `Tarmoq,Tarmoq Turi,${collectedData.connectionType || ''}\n`;
                data += `Tarmoq,Tarmoq Tezligi,${collectedData.networkSpeed || ''} Mbps\n`;
                data += `Tarmoq,Provayder,${collectedData.isp || ''}\n`;
                data += `Tarmoq,Xavfsizlik,${collectedData.security || ''}\n`;
                data += `Tarmoq,SSL Certifikati,${collectedData.sslInfo || ''}\n`;
                data += `Tarmoq,Ping,${collectedData.ping || ''}\n`;
                
                // Ekran ma'lumotlari
                data += `Ekran,Ekran O'lchami,${collectedData.screenSize || ''}\n`;
                data += `Ekran,Rang Chuqurligi,${collectedData.colorDepth || ''}\n`;
                data += `Ekran,Piksellik Nisbati,${collectedData.pixelRatio || ''}\n`;
                data += `Ekran,Viewport O'lchami,${collectedData.viewportSize || ''}\n`;
                data += `Ekran,Tili,${collectedData.language || ''}\n`;
                data += `Ekran,Vaqt Zonasi,${collectedData.timezone || ''}\n`;
                data += `Ekran,Sensorlar,${collectedData.sensors || ''}\n`;
                data += `Ekran,Brauzer Belgilari,${collectedData.cookies || ''}\n`;
                data += `Ekran,Saqlash Imkoniyatlari,${collectedData.storageCapabilities || ''}\n`;
                
                // Geolokatsiya
                data += `Geolokatsiya,Aniq Joylashuv,${collectedData.geolocation?.location || ''}\n`;
                data += `Geolokatsiya,Aniqlik,${collectedData.geolocation?.accuracy ? Math.round(collectedData.geolocation.accuracy) : 0} metr\n`;
                
                // Joylashuv tafsilotlari
                if (collectedData.locationDetails) {
                    data += `Geolokatsiya,Ko'cha,${collectedData.locationDetails.street || ''}\n`;
                    data += `Geolokatsiya,Shahar,${collectedData.locationDetails.city || ''}\n`;
                    data += `Geolokatsiya,Viloyat,${collectedData.locationDetails.region || ''}\n`;
                    data += `Geolokatsiya,Mamlakat,${collectedData.locationDetails.country || ''}\n`;
                }
                
                // Batareya
                if (collectedData.battery) {
                    data += `Batareya,Darajasi,${collectedData.battery.level || 0}%\n`;
                    data += `Batareya,Zaryadlanmoqda,${collectedData.battery.charging ? 'Ha' : "Yo'q"}\n`;
                }
                
                filename = 'foydalanuvchi_malumotlari.csv';
                mimeType = 'text/csv';
            } else if (format === 'pdf') {
                showNotification("PDF formatidagi hisobot tayyorlanmoqda...", "warning", 2000);
                setTimeout(() => {
                    showNotification("PDF generatsiya funksiyasi hozircha ishga tushirilmagan", "error", 3000);
                }, 2000);
                return;
            } else {
                // Matnli format
                data = "Foydalanuvchi Ma'lumotlari Hisoboti\n";
                data += "====================================\n";
                data += `Hisobot vaqti: ${new Date().toLocaleString()}\n\n`;
                
                // Qurilma ma'lumotlari
                data += "=== Qurilma Ma'lumotlari ===\n";
                data += `Brauzer: ${collectedData.browser || ''}\n`;
                data += `Operatsion Sistema: ${collectedData.os || ''}\n`;
                data += `Qurilma Turi: ${collectedData.deviceType || ''}\n`;
                data += `Protsessor: ${collectedData.cpu || ''}\n`;
                data += `Operativ Xotira: ${collectedData.ram || ''}\n`;
                data += `Saqlash Joyi: ${collectedData.storage || ''}\n`;
                
                if (collectedData.plugins && collectedData.plugins.length > 0) {
                    data += `Brauzer Plaginlari:\n${collectedData.plugins.map(p => `- ${p}`).join('\n')}\n`;
                }
                
                if (collectedData.battery) {
                    data += `Batareya: ${collectedData.battery.level}%${collectedData.battery.charging ? ' (Zaryadlanmoqda)' : ''}\n`;
                }
                
                data += `\n`;
                
                // Tarmoq ma'lumotlari
                data += "=== Tarmoq Ma'lumotlari ===\n";
                data += `IP Manzili: ${collectedData.ip || ''}\n`;
                data += `Joylashuv: ${collectedData.location || ''}\n`;
                data += `Tarmoq Turi: ${collectedData.connectionType || ''}\n`;
                data += `Tarmoq Tezligi: ${collectedData.networkSpeed || ''} Mbps\n`;
                data += `Ping: ${collectedData.ping || ''}\n`;
                data += `Provayder: ${collectedData.isp || ''}\n`;
                data += `Xavfsizlik: ${collectedData.security || ''}\n`;
                data += `SSL Certifikati: ${collectedData.sslInfo || ''}\n`;
                data += `\n`;
                
                // Ekran ma'lumotlari
                data += "=== Ekran & Muhit Ma'lumotlari ===\n";
                data += `Ekran O'lchami: ${collectedData.screenSize || ''}\n`;
                data += `Rang Chuqurligi: ${collectedData.colorDepth || ''}\n`;
                data += `Piksellik Nisbati: ${collectedData.pixelRatio || ''}\n`;
                data += `Viewport O'lchami: ${collectedData.viewportSize || ''}\n`;
                data += `Tili: ${collectedData.language || ''}\n`;
                data += `Vaqt Zonasi: ${collectedData.timezone || ''}\n`;
                data += `Sensorlar: ${collectedData.sensors || ''}\n`;
                data += `Brauzer Belgilari: ${collectedData.cookies || ''}\n`;
                data += `Saqlash Imkoniyatlari: ${collectedData.storageCapabilities || ''}\n`;
                data += `\n`;
                
                // Geolokatsiya
                data += "=== Geolokatsiya ===\n";
                data += `Aniq Joylashuv: ${collectedData.geolocation?.location || ''}\n`;
                data += `Aniqlik: ${collectedData.geolocation?.accuracy ? Math.round(collectedData.geolocation.accuracy) : 0} metr\n`;
                
                // Joylashuv tafsilotlari
                if (collectedData.locationDetails) {
                    data += `Ko'cha: ${collectedData.locationDetails.street || ''}\n`;
                    data += `Shahar: ${collectedData.locationDetails.city || ''}\n`;
                    data += `Viloyat: ${collectedData.locationDetails.region || ''}\n`;
                    data += `Mamlakat: ${collectedData.locationDetails.country || ''}\n`;
                }
                
                filename = 'foydalanuvchi_malumotlari.txt';
                mimeType = 'text/plain';
            }
            
            // Faylni yuklab olish
            const blob = new Blob([data], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification(`${filename} fayli yuklab olindi!`, "success", 3000);
            collectedData.lastExport = new Date().toLocaleString();
            document.getElementById('lastExport').textContent = collectedData.lastExport;
            saveDataToLocalStorage();
        }
        
        // Dasturni ishga tushirish
        document.addEventListener('DOMContentLoaded', () => {
            // Ma'lumotlarni yuklash
            if (loadDataFromLocalStorage()) {
                showNotification("Saqlangan ma'lumotlar yuklandi", "success", 2000);
            }
            
            // Tablar boshqaruvi
            const tabBtns = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const tabId = btn.getAttribute('data-tab');
                    
                    // Faol tabni o'zgartirish
                    tabBtns.forEach(b => b.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    btn.classList.add('active');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });
            
            // Yuklab olish variantlarini boshqarish
            const downloadBtn = document.getElementById('downloadBtn');
            const downloadOptions = document.getElementById('downloadOptions');
            
            downloadBtn.addEventListener('click', () => {
                downloadOptions.classList.toggle('show');
            });
            
            document.addEventListener('click', (e) => {
                if (!downloadBtn.contains(e.target) && !downloadOptions.contains(e.target)) {
                    downloadOptions.classList.remove('show');
                }
            });
            
            // Yuklab olish variantlari
            document.querySelectorAll('.download-option').forEach(option => {
                option.addEventListener('click', () => {
                    const format = option.getAttribute('data-format');
                    downloadOptions.classList.remove('show');
                    downloadData(format);
                });
            });
            
            // Tafsilotlar tugmasi
            document.getElementById('detailsBtn').addEventListener('click', () => {
                alert("Ushbu ilova sizning qurilmangiz, brauzeringiz, tarmoq sozlamalaringiz va joylashuvingiz haqida ma'lumot to'playdi. Barcha ma'lumotlar faqat sizning brauzeringizda saqlanadi va hech qanday serverga yuborilmaydi. Ma'lumotlarni faqat siz ko'rishingiz mumkin. Ma'lumotlarni yig'ish jarayonida sizning ruxsatingiz talab qilinadi.");
            });
            
            // Ma'lumotlarni yangilash
            document.getElementById('refreshBtn').addEventListener('click', () => {
                updateDeviceInfo();
            });
            
            // Tozalash tugmasi
            document.getElementById('clearBtn').addEventListener('click', () => {
                if (confirm("Haqiqatan ham barcha ma'lumotlarni tozalashni istaysizmi? Bu sizning joriy ma'lumotlaringizni o'chiradi.")) {
                    document.querySelectorAll('.info-item p').forEach(el => {
                        el.textContent = "Aniqlanmoqda...";
                    });
                    document.getElementById('exactLocation').textContent = "Aniqlanmoqda...";
                    document.getElementById('accuracyValue').textContent = "0";
                    document.getElementById('map').innerHTML = "";
                    document.getElementById('mapLoading').style.display = 'flex';
                    document.getElementById('pluginsList').innerHTML = '<div class="plugin-item"><i class="fas fa-spinner fa-spin"></i> Aniqlanmoqda...</div>';
                    document.getElementById('speedProgress').style.width = "0%";
                    document.getElementById('batteryFill').style.width = "0%";
                    
                    // Joylashuv tafsilotlarini tozalash
                    document.getElementById('street').textContent = "Aniqlanmoqda...";
                    document.getElementById('city').textContent = "Aniqlanmoqda...";
                    document.getElementById('region').textContent = "Aniqlanmoqda...";
                    document.getElementById('country').textContent = "Aniqlanmoqda...";
                    
                    // Statistikani tozalash
                    collectedData.networkHistory = [];
                    collectedData.performanceStats = {
                        maxSpeed: 0,
                        minPing: 9999,
                        avgSpeed: 0,
                        stability: 0
                    };
                    collectedData.history = [];
                    
                    // Grafiklarni yangilash
                    if (networkChart) networkChart.destroy();
                    if (systemChart) systemChart.destroy();
                    if (historyChart) historyChart.destroy();
                    
                    // Intervalni tozalash
                    if (networkSpeedInterval) {
                        clearInterval(networkSpeedInterval);
                        networkSpeedInterval = null;
                    }
                    
                    showNotification("Ma'lumotlar tozalandi!", "success", 2000);
                }
            });
            
            // Statistikani tiklash tugmasi
            document.getElementById('resetBtn').addEventListener('click', () => {
                if (confirm("Haqiqatan ham statistikani tiklashni istaysizmi? Bu barcha tarixiy ma'lumotlarni o'chiradi.")) {
                    collectedData.networkHistory = [];
                    collectedData.history = [];
                    collectedData.performanceStats = {
                        maxSpeed: 0,
                        minPing: 9999,
                        avgSpeed: 0,
                        stability: 0
                    };
                    
                    // Grafiklarni yangilash
                    if (networkChart) {
                        networkChart.data.labels = [];
                        networkChart.data.datasets[0].data = [];
                        networkChart.update();
                    }
                    
                    if (historyChart) {
                        historyChart.data.datasets[0].data = [];
                        historyChart.update();
                    }
                    
                    document.getElementById('avgSpeed').textContent = "0 Mbps";
                    document.getElementById('maxSpeed').textContent = "0 Mbps";
                    document.getElementById('minPing').textContent = "0 ms";
                    document.getElementById('stability').textContent = "0%";
                    
                    updateHistoryStats();
                    
                    showNotification("Statistika tozalandi!", "success", 2000);
                }
            });
            
            // Mavzuni o'zgartirish
            document.querySelectorAll('.theme-option').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.theme-option').forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    const theme = option.getAttribute('data-theme');
                    collectedData.settings.theme = theme;
                    document.body.className = theme + '-theme';
                    saveDataToLocalStorage();
                });
            });
            
            // Tilni o'zgartirish
            document.querySelectorAll('.language-option').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.language-option').forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    collectedData.settings.language = option.getAttribute('data-lang');
                    saveDataToLocalStorage();
                    showNotification("Til sozlamalari saqlandi. Ilovani yangilang.", "success", 3000);
                });
            });
            
            // Avtoyangilashni sozlash
            document.getElementById('autoRefresh').addEventListener('change', function() {
                collectedData.settings.autoRefresh = parseInt(this.value);
                updateNetworkSpeedPeriodically();
                saveDataToLocalStorage();
            });
            
            // Avtosaqlashni sozlash
            document.getElementById('autoSave').addEventListener('change', function() {
                collectedData.settings.autoSave = parseInt(this.value);
                startAutoSave();
                saveDataToLocalStorage();
            });
            
            // Dasturni boshlash
            updateDeviceInfo();
            startAutoSave();
            
            // Tizim resurslarini yangilash
            setInterval(updateCharts, 5000);
        });
    </script>
</body>
</html>